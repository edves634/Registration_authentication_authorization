# Библиотечная система с аутентификацией и авторизацией

## Описание проекта

Это Spring Boot приложение представляет собой систему управления библиотекой с полным циклом аутентификации и авторизации пользователей. Проект включает следующие основные функции:

- Регистрация новых пользователей
- Аутентификация через JWT токены
- Управление книгами (просмотр, аренда, возврат)
- Разграничение прав доступа по ролям (ADMIN, READER)
- Документация API через Swagger/OpenAPI

## Технологический стек

- **Backend**: Java 17, Spring Boot 3.x
- **Безопасность**: Spring Security, JWT
- **База данных**: H2 (in-memory)
- **Документация**: Swagger/OpenAPI 3
- **Сборка**: Maven
- **Логирование**: SLF4j

## Функциональные возможности

### Аутентификация и авторизация

- Регистрация новых пользователей с валидацией данных
- Вход в систему с получением JWT токена
- Автоматическая проверка токена при каждом запросе
- Разграничение доступа по ролям:
    - ADMIN: полный доступ
    - READER: просмотр и аренда книг

### Управление книгами

- Просмотр списка книг с пагинацией
- Поиск книги по ID
- Аренда книги (для авторизованных читателей)
- Возврат книги (только тем пользователем, который ее арендовал)

## Запуск приложения

1. Клонировать репозиторий
2. Убедиться, что установлены Java 17 и Maven
3. Запустить приложение:
   ```
   mvn spring-boot:run
   ```
4. Приложение будет доступно по адресу: `http://localhost:8080`

## Доступные endpoints

- Swagger UI: `http://localhost:8080/swagger-ui.html`
- H2 Console: `http://localhost:8080/h2-console` (JDBC URL: `jdbc:h2:mem:librarydb`)

## Тестовые пользователи

При запуске автоматически создаются два тестовых пользователя:

- **Администратор**:
    - Логин: `admin`
    - Пароль: `admin123`
    - Роль: ADMIN

- **Читатель**:
    - Логин: `reader`
    - Пароль: `reader123`
    - Роль: READER

Также создаются две тестовые книги:
1. "Война и мир" - Лев Толстой
2. "Преступление и наказание" - Федор Достоевский

## Конфигурация

Основные настройки приложения можно изменить в файле `application.properties`:

- Порт сервера
- Настройки базы данных H2
- Время жизни JWT токена
- Уровни логирования

## Особенности реализации

- Stateless аутентификация с использованием JWT
- Полноценная обработка ошибок и исключений
- Валидация входящих данных
- Логирование ключевых операций
- Гибкая система авторизации с аннотациями Spring Security
- Подробная документация API через Swagger

## Дальнейшее развитие

1. Добавление системы бронирования книг
2. Реализация уведомлений о сроке возврата книг
3. Расширение ролевой модели
4. Интеграция с внешними системами (например, платежами)
5. Миграция на PostgreSQL для production среды